# RiBot by Ridys (vk.com/id159327848)
Бот для ВКонтакте сообществ, с возможностью автоматических ответов на сообщения и работающий на базе данных MySQL и PHP

### Требования:
  - Веб-сервер с настроенным HTTPS (сертификат должен быть подписан доверенным ЦС)
  - PHP >=5.6, работающий на Apache
  - База данных MySQLi
### Установка:
1. Загрузите архив на ваш сервер, используя git или [загрузив zip-архив](https://github.com/Ridys/ribot/archive/master.zip).
```sh
$ git clone https://github.com/Ridys/ribot.git
```
2. Создайте сообщество в ВКонтакте, зайдите в настройки и включите "Сообщения сообщества". [посмотреть скриншот](https://drive.google.com/open?id=0Bx9B2btd097IczZULWVka0RlUkk)

3. Зайдите в настройки сообщества, раздел "Работа с API" и создайте ключ доступа сообщества. [посмотреть скриншот](https://drive.google.com/open?id=0Bx9B2btd097IdUtDU0ZabjUyOWM)

4. В разделе "Работа с API" зайдите в вкладку "Callback API" и укажите адрес до файла `callback.php`, в вкладке "Типы событий" отметьте галочкой "Входящее сообщение". [посмотреть скриншот](https://drive.google.com/open?id=0Bx9B2btd097IcXgzYi1VY2ZjLVk)

5. Теперь вам необходимо настроить файл `token.php`, который находится в папке  `adm`. Там вам необходимо заменить "строку, которую должен вернуть сервер" на свою из 4-ого пункта (см. скриншот) и добавить ключ доступа (токен). Следуйте комментариям в файле.

6. Загрузите дамп таблицы из файла `database.sql` в свою базу данных MySQL. Настройте файл `db.php`, который находится в папке  `adm`. В этом файле необходимо указать путь до скрипта и данные для доступа к базе данных.

7. В настройка группы ВКонтакте, раздел "Работа с API" в вкладке "Callback API" пройдите проверку вашего сервера (добавив адрес до `callback.php`, см. скриншот пункт 4). Если всё настроено верно - проверка должна завершиться успешно и сервер пройдет проверку.

8. Отлично, бот установлен! Попробуйте написать вашему боту "Привет!" в сообщения сообщества. Чтобы управлять ботом вам необходимо перейти на страницу `example.com/путь_до_бота/adm/index.php`. Там уже добавлены некоторые фразы, вы можете добавить свои или отредактировать существующие.

### Примечания
  - ВНИМАНИЕ! В скрипте нет встроенной функции авторизации в админпанели, на данный момент это большой минус и скоро он будет исправлен. Сейчас вы можете использовать авторизацию `.htpasswd` от веб-сервера Apache. 
  - Предоставленная база данных является проверочной, использовать её дальше или нет - выбор за вами. Если вы хотите полноценного чат-бота - дополнять базу необходимо в любом случае.
  - В базе данных должна храниться скрипт-фраза без всяких запятых, скобок и прочих знаков. Ответ #1 и Ответ #2 могут содержать любые знаки.
  - Ответ #1 и Ответ #2 из базы выбираются ботом случайно. Шанс 50/50.
  - Если у вас возникли вопросы в установке обращайтесь ко мне в [ВКонтакте](https://vk.com/id159327848).

Дмитрий Агейкин © 2017 г.
Вы можете использовать данный скрипт для любых целей, включая коммерческие.
